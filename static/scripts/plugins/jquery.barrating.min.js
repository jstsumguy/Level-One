(function(d){var l;("undefined"!==typeof window&&null!==window?window:global).BarRating=l=function(){function b(){this.show=function(){var a=this.$elem,c,b,f=this.options,k,e;if(!a.data("barrating")){e=f.initialRating?d('option[value="'+f.initialRating+'"]',a):d("option:selected",a);a.data("barrating",{userOptions:f,currentRatingValue:e.val(),currentRatingText:e.data("html")?e.data("html"):e.text(),originalRatingValue:e.val(),originalRatingText:e.data("html")?e.data("html"):e.text()});c=d("<div />",
{"class":"br-widget"}).insertAfter(a);a.find("option").each(function(){var a,b,g;if(a=d(this).val())b=d(this).text(),(g=d(this).data("html"))&&(b=g),a=d("<a />",{href:"#","data-rating-value":a,"data-rating-text":b}),b=d("<span />",{html:f.showValues?b:""}),c.append(a.append(b))});f.showSelectedRating&&c.append(d("<div />",{text:"","class":"br-current-rating"}));a.data("barrating").deselectable=a.find("option:first").val()?!1:!0;k=f.reverse?"nextAll":"prevAll";f.reverse&&c.addClass("br-reverse");f.readonly&&
c.addClass("br-readonly");c.on("ratingchange",function(b,c,g){c=c?c:a.data("barrating").currentRatingValue;g=g?g:a.data("barrating").currentRatingText;a.find('option[value="'+c+'"]').prop("selected",!0);a.change();f.showSelectedRating&&d(this).find(".br-current-rating").text(g)}).trigger("ratingchange");c.on("ratingstyle",function(b){c.find("a").removeClass("br-selected br-current");d(this).find('a[data-rating-value="'+a.data("barrating").currentRatingValue+'"]').addClass("br-selected br-current")[k]().addClass("br-selected")}).trigger("ratingstyle");
b=c.find("a");b.on("touchstart",function(a){a.preventDefault();a.stopPropagation();d(this).click()});if(f.readonly)b.on("click",function(a){a.preventDefault()});f.readonly||(b.on("click",function(e){var h=d(this),g;e.preventDefault();b.removeClass("br-active br-selected");h.addClass("br-selected")[k]().addClass("br-selected");e=h.attr("data-rating-value");g=h.attr("data-rating-text");h.hasClass("br-current")&&a.data("barrating").deselectable?(h.removeClass("br-selected br-current")[k]().removeClass("br-selected br-current"),
g=e=""):(b.removeClass("br-current"),h.addClass("br-current"));a.data("barrating").currentRatingValue=e;a.data("barrating").currentRatingText=g;c.trigger("ratingchange");f.onSelect.call(this,a.data("barrating").currentRatingValue,a.data("barrating").currentRatingText);return!1}),b.on({mouseenter:function(){var a=d(this);b.removeClass("br-active").removeClass("br-selected");a.addClass("br-active")[k]().addClass("br-active");c.trigger("ratingchange",[a.attr("data-rating-value"),a.attr("data-rating-text")])}}),
c.on({mouseleave:function(){b.removeClass("br-active");c.trigger("ratingchange").trigger("ratingstyle")}}));a.hide()}};this.set=function(a){this.$elem.find('option[value="'+a+'"]').val()&&(this.$elem.data("barrating").currentRatingValue=a,this.$elem.data("barrating").currentRatingText=this.$elem.find('option[value="'+a+'"]').text(),this.$widget.trigger("ratingchange").trigger("ratingstyle"))};this.clear=function(){this.$elem.data("barrating").currentRatingValue=this.$elem.data("barrating").originalRatingValue;
this.$elem.data("barrating").currentRatingText=this.$elem.data("barrating").originalRatingText;this.$widget.trigger("ratingchange").trigger("ratingstyle");this.$elem.data("barrating").userOptions.onClear.call(this,this.$elem.data("barrating").currentRatingValue,this.$elem.data("barrating").currentRatingText)};this.destroy=function(){var a=this.$elem.data("barrating").currentRatingValue,c=this.$elem.data("barrating").currentRatingText,b=this.$elem.data("barrating").userOptions;this.$elem.removeData("barrating");
this.$widget.off().remove();this.$elem.show();b.onDestroy.call(this,a,c)}}b.prototype.init=function(a,b){this.elem=b;this.$elem=d(b);return this.options=d.extend({},d.fn.barrating.defaults,a)};return b}();d.fn.barrating=function(b,a){return this.each(function(){var c=new l;d(this).is("select")||d.error("Sorry, this plugin only works with select fields.");if(c.hasOwnProperty(b)){c.init(a,this);if("show"===b)return c.show(a);c.$widget=d(this).next(".br-widget");if(c.$widget&&c.$elem.data("barrating"))return c[b](a)}else if("object"!==
typeof b&&b)d.error("Method "+b+" does not exist on jQuery.barrating");else return a=b,c.init(a,this),c.show()})};return d.fn.barrating.defaults={initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,onSelect:function(b,a){},onClear:function(b,a){},onDestroy:function(b,a){}}})(jQuery);
